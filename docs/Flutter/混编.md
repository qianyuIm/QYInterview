# ios 与 Flutter混编
## 第一种方式
1. 创建flutter工程  

> flutter create --template module flutter_module


2.创建iOS工程OCFlutterProject并使用pod  
podfile 文件添加  

```
flutter_application_path = '../flutter_module'
load File.join(flutter_application_path, '.ios', 'Flutter', 'podhelper.rb')

target 'OCFlutterProject' do
  # Comment the next line if you don't want to use dynamic frameworks
  use_frameworks!

  install_all_flutter_pods(flutter_application_path)

end

```

在```AppDelegate.h```中  

```
#import <UIKit/UIKit.h>
#import <Flutter/Flutter.h>

@interface AppDelegate : FlutterAppDelegate
@property (nonatomic,strong) FlutterEngine *flutterEngine;
@end
```

在```AppDelegate.m```中  

```
#import "AppDelegate.h"
#import <FlutterPluginRegistrant/GeneratedPluginRegistrant.h>

@interface AppDelegate ()

@end

@implementation AppDelegate


- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    // Override point for customization after application launch.
    self.flutterEngine = [[FlutterEngine alloc] initWithName:@"my flutter"];
      // Runs the default Dart entrypoint with a default Flutter route.
    [self.flutterEngine run];
      // Used to connect plugins (only if you have plugins with iOS platform code).
    [GeneratedPluginRegistrant registerWithRegistry:self.flutterEngine];
    return [super application:application didFinishLaunchingWithOptions:launchOptions];
}
@end
```

在```ViewController.m```中点击按钮执行

```
#import <Flutter/Flutter.h>
FlutterEngine *flutterEngine =
            ((AppDelegate *)UIApplication.sharedApplication.delegate).flutterEngine;
FlutterViewController *flutterViewController =
            [[FlutterViewController alloc] initWithEngine:flutterEngine nibName:nil bundle:nil];
[self presentViewController:flutterViewController animated:YES completion:nil];
```

这时候会报错

> Failed to find assets path for "Frameworks/App.framework/flutter_assets"
Engine run configuration was invalid
Could not launch engine with configuration.

添加脚本

**target**->**Build Phases**-> **+** -> **New Run Script Phase** -> **Run Script**  

``` 
"$FLUTTER_ROOT/packages/flutter_tools/bin/xcode_backend.sh" build
"$FLUTTER_ROOT/packages/flutter_tools/bin/xcode_backend.sh" embed ${SOURCE_ROOT}/Flutter/App.framework
```

运行错误提示：

```
line 2: /packages/flutter_tools/bin/xcode_backend.sh: No such file or directory
line 3: /packages/flutter_tools/bin/xcode_backend.sh: No such file or directory
```

检查```FLUTTER_ROOT```路径是否对，如若没有，添加自己安装```flutter```的位置路径
**target** -> **Build Settings (若没有搜索到FLUTTER_ROOT)** -> **+** -> **Add User-Defined Setting**

**再次运行,成功！！！！**